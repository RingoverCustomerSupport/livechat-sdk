class CustomerSupportSDK{isIframePresent=!1;isReady=!1;userData=null;userDataSet=!1;MESSAGE_TYPES={IS_READY:"is_ready",USER_DATA_READY:"user_data_ready",REQUESTING_USER_DATA:"requesting_user_data",SET_USER_DATA:"set_user_data",IS_CHATBOX_OPEN:"is_chatbox_open"};constructor(e,t){if(!this.isIframePresent){var s=document.createElement("IFRAME");const a="https://customer-support-livechat-dot-apt-cubist-307713.ew.r.appspot.com";s.src=a+"?userCdnId="+e,this.iframe=s,document.body.appendChild(this.iframe),this.isIframePresent=!0,this.setStyles(t);window.addEventListener("message",e=>{e.origin===a&&(e.data?.type===this.MESSAGE_TYPES.IS_READY?(console.log("SDK",e.data),this.isReady=!0):e.data?.type===this.MESSAGE_TYPES.REQUESTING_USER_DATA?(console.log("SDK",e.data),this.sendMessage({type:this.MESSAGE_TYPES.SET_USER_DATA,data:this.userData}),this.userDataSet=!0):e.data?.type===this.MESSAGE_TYPES.IS_CHATBOX_OPEN&&(e.data.data?this.iframe.style.boxShadow="rgba(41, 43, 88, 0.2) 5.10258px 0.2052px 51.0258px":this.iframe.style.boxShadow="none"))})}}sendMessage(e){this.iframe.contentWindow.postMessage(e,"*")}setStyles(e){this.iframe.frameBorder="0",this.iframe.width=e?.width??"350px",this.iframe.height=e?.height??"555px",this.iframe.style.border="0",this.iframe.style.position="fixed",this.iframe.style.bottom="40px",this.iframe.style.right="40px",this.iframe.style.zIndex=e?.zIndex??1e3,this.iframe.style.borderRadius="15px"}setUserData(e){var t;e?this.userDataSet||(this.userData=e,this.isReady?this.sendMessage({type:this.MESSAGE_TYPES.USER_DATA_READY}):(setTimeout(()=>{this.sendMessage({type:this.MESSAGE_TYPES.USER_DATA_READY})},1e3),t=setInterval(()=>{this.isReady&&(this.sendMessage({type:this.MESSAGE_TYPES.USER_DATA_READY}),clearInterval(t))},200))):console.error("Customer Support SDK: no user data is provided")}}window.CustomerSupportSDK=CustomerSupportSDK;